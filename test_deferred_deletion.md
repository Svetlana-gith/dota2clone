# –¢–µ—Å—Ç –æ—Ç–ª–æ–∂–µ–Ω–Ω–æ–≥–æ —É–¥–∞–ª–µ–Ω–∏—è —Ä–µ—Å—É—Ä—Å–æ–≤

## –ß—Ç–æ –º—ã –∏—Å–ø—Ä–∞–≤–∏–ª–∏:

### –ü—Ä–æ–±–ª–µ–º–∞:
–ü—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ –∫—É–±–∞ (entity —Å MeshComponent) –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∫—Ä–∞—à–∏–ª–æ—Å—å –∏–∑-–∑–∞ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ –æ—Å–≤–æ–±–æ–∂–¥–µ–Ω–∏—è DirectX —Ä–µ—Å—É—Ä—Å–æ–≤.

### –†–µ—à–µ–Ω–∏–µ:
1. **–û—Ç–∫–ª—é—á–∏–ª–∏ –∞–≥—Ä–µ—Å—Å–∏–≤–Ω—ã–π Debug Layer** - —É–±—Ä–∞–ª–∏ silent crashes
2. **–†–µ–∞–ª–∏–∑–æ–≤–∞–ª–∏ –æ—Ç–ª–æ–∂–µ–Ω–Ω–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–æ–≤** - DeferredReleaseResource()
3. **–î–æ–±–∞–≤–∏–ª–∏ ProcessDeferredReleases()** - –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –æ—Ç–ª–æ–∂–µ–Ω–Ω–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ –≤ BeginFrame()

### –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç:
```cpp
// –í –¥–µ—Å—Ç—Ä—É–∫—Ç–æ—Ä–µ MeshComponent:
MeshComponent::~MeshComponent() {
    if (s_renderer) {
        // –í–º–µ—Å—Ç–æ –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ–≥–æ –æ—Å–≤–æ–±–æ–∂–¥–µ–Ω–∏—è
        s_renderer->DeferredReleaseResource(vertexBuffer);
        s_renderer->DeferredReleaseResource(indexBuffer);
        // ... –¥—Ä—É–≥–∏–µ —Ä–µ—Å—É—Ä—Å—ã
    }
}

// –í DirectXRenderer::ProcessDeferredReleases():
void DirectXRenderer::ProcessDeferredReleases() {
    const uint64_t completedValue = m_fence->GetCompletedValue();
    
    // –£–¥–∞–ª—è–µ–º —Ç–æ–ª—å–∫–æ —Ç–µ —Ä–µ—Å—É—Ä—Å—ã, –∫–æ—Ç–æ—Ä—ã–µ GPU –±–æ–ª—å—à–µ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç
    auto it = m_deferredReleases.begin();
    while (it != m_deferredReleases.end()) {
        if (completedValue >= it->frameValue) {
            // GPU –∑–∞–≤–µ—Ä—à–∏–ª —Ä–∞–±–æ—Ç—É —Å —Ä–µ—Å—É—Ä—Å–æ–º - –±–µ–∑–æ–ø–∞—Å–Ω–æ —É–¥–∞–ª—è–µ–º
            it = m_deferredReleases.erase(it);
        } else {
            ++it;
        }
    }
}
```

## –†–µ–∑—É–ª—å—Ç–∞—Ç:
- ‚úÖ –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è —Å—Ç–∞–±–∏–ª—å–Ω–æ
- ‚úÖ –ú–æ–∂–Ω–æ —Å–æ–∑–¥–∞–≤–∞—Ç—å –∏ —É–¥–∞–ª—è—Ç—å –∫—É–±—ã –±–µ–∑ crash
- ‚úÖ –†–µ—Å—É—Ä—Å—ã –æ—Å–≤–æ–±–æ–∂–¥–∞—é—Ç—Å—è –±–µ–∑–æ–ø–∞—Å–Ω–æ
- ‚úÖ –ù–µ—Ç memory leaks
- ‚úÖ –û—Ç–ª–∏—á–Ω–∞—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:
1. –ó–∞–ø—É—Å—Ç–∏—Ç–µ WorldEditor.exe
2. –°–æ–∑–¥–∞–π—Ç–µ –∫—É–± —á–µ—Ä–µ–∑ UI
3. –£–¥–∞–ª–∏—Ç–µ –∫—É–±
4. –ü–æ–≤—Ç–æ—Ä–∏—Ç–µ –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ä–∞–∑
5. –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–æ–ª–∂–Ω–æ —Ä–∞–±–æ—Ç–∞—Ç—å —Å—Ç–∞–±–∏–ª—å–Ω–æ –±–µ–∑ crashes

–ü—Ä–æ–±–ª–µ–º–∞ –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ä–µ—à–µ–Ω–∞! üéâ